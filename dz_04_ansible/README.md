# Домашнее задание к занятию 4 «Работа с roles»

## Основная часть
1. Создайте в старой версии playbook файл requirements.yml и заполните его содержимым:
```
---
  - src: git@github.com:AlexeySetevoi/ansible-clickhouse.git
    scm: git
    version: "1.13"
    name: clickhouse 
```
2. При помощи ansible-galaxy скачайте себе эту роль.
3. Создайте новый каталог с ролью при помощи ansible-galaxy role init vector-role.
4. На основе tasks из старого playbook заполните новую role. Разнесите переменные между vars и default.
5. Перенести нужные шаблоны конфигов в templates.
6. Опишите в README.md обе роли и их параметры. Пример качественной документации ansible role по ссылке.
7. Повторите шаги 3–6 для LightHouse. Помните, что одна роль должна настраивать один продукт.
8. Выложите все roles в репозитории. Проставьте теги, используя семантическую нумерацию. Добавьте roles в requirements.yml в playbook.
9. Переработайте playbook на использование roles. Не забудьте про зависимости LightHouse и возможности совмещения roles с tasks.
10. Выложите playbook в репозиторий.
11. В ответе дайте ссылки на оба репозитория с roles и одну ссылку на репозиторий с playbook.

## Ответ:
### 1. Создайте в старой версии playbook файл requirements.yml и заполните его содержимым:
![задание 1]()
### 2. При помощи ansible-galaxy скачайте себе эту роль.
![задание 2]()
### 3. Создайте новый каталог с ролью при помощи ansible-galaxy role init vector-role.
![задание 4]()
### 5. Запустите ansible-lint site.yml и исправьте ошибки, если они есть.
![задание 5]()
### 6. Попробуйте запустить playbook на этом окружении с флагом --check.
![задание 6]()
### 7. Запустите playbook на prod.yml окружении с флагом --diff. Убедитесь, что изменения на системе произведены.
![задание 7]()
### 8. Повторно запустите playbook с флагом --diff и убедитесь, что playbook идемпотентен.
![задание 8]()
## ![задание 9]()


